<<<<<<< HEAD
function submitOnEnterKey(a,b){b=b||form;for(var c=function(b){13===b.keyCode&&a()},d=b.childNodes,e=0;e<d.length;e++){var f=d[e];f.id&&"js-admin-info"===f.id&&submitOnEnterKey(a,f);var g=f.getAttribute("type");"text"!==g&&"email"!==g&&"password"!==g&&"number"!==g&&"phone"!==g||(f.onkeydown=c)}}function submitCreateForm(){var a={},b="";return form.gameName.value&&(a.gameName=form.gameName.value),form.gameCode.value?a.gameCode=form.gameCode.value:(error(form.gameCode),b+="Please Enter Game Code; "),form.email.value&&validateEmail(form.email)?a.email=form.email.value:(error(form.email),b+="Please Enter Proper Email; "),form.password.value?a.password=form.password.value:(error(form.password),b+="Please Enter Password; "),form.setRules.value&&(a.setRules=form.setRules.value),b?displayError(b):void fetch("/create",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(function(a){return a.ok?void a.json().then(function(a){localStorage.token=a.token,window.location="/admin?token="+a.token}):submitError(a)}).catch(submitError)}function fetchAdmin(){localStorage.token||(window.location="/");var a=JSON.parse(atob(localStorage.token.split(".")[1]));localStorage.token||(window.location="/"),fetch("/admin/getPlayers",{headers:{"x-access-token":localStorage.token,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({gameCode:a.gameCode})}).then(function(a){return a.ok?void a.json().then(function(a){populateAdminPage(a)}):submitError()}).catch(submitError)}function fetchPlayer(){localStorage.token||(window.location="/");var a=JSON.parse(atob(localStorage.token.split(".")[1]));fetch("/getPlayer",{headers:{"x-access-token":localStorage.token,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({gameCode:a.gameCode,playerId:a.playerId})}).then(function(a){return a.ok?void a.json().then(function(a){populateProfilePage(a)}):submitError()}).catch(submitError)}function populateAdminPage(a){var b=document.getElementById("js-admin"),c=document.createElement("table"),d=document.createElement("tbody");a.forEach(function(a){var b=document.createElement("tr"),c=document.createElement("td");c.innerHTML=a.firstName+" "+a.lastName;var e=document.createElement("td"),f=searchTarget(a.target.victim);console.log(f),e.innerHTML=f.firstName+" "+f.lastName;var g=document.createElement("td");g.innerHTML=a.target.timeAssigned;var h=document.createElement("td");h.innerHTML=a.killedBy.killTime;var i=document.createElement("button");a.killedBy?i.onclick=approveKill(a.killedBy.killer):console.log("Did Not Work"),i.innerHTML="approve";var j=document.createElement("button");j.setAttribute("onclick",'removeUser("'+a._id+'")'),j.innerHTML="remove",b.appendChild(c),b.appendChild(e),b.appendChild(g),b.appendChild(h),b.appendChild(i),b.appendChild(j),d.appendChild(b)}),c.appendChild(d),b.appendChild(c)}function searchTarget(a){var b=JSON.parse(atob(localStorage.token.split(".")[1]));data={gameCode:b.gameCode,target_Id:a},console.log(player),fetch("/admin/getTarget",{headers:{"x-access-token":localStorage.token,"Content-Type":"application/json"},method:"POST",body:JSON.stringify(player)}).then(function(a){return a.ok?(console.log("hello"),void a.json().then(function(a){return a})):submitError()}).catch(submitError)}function approveKill(a){var b=JSON.parse(atob(localStorage.token.split(".")[1]));data={gameCode:b.gameCode,killerId:a},fetch("/admin/approveKill",{headers:{"x-access-token":localStorage.token,"Content-Type":"application/json"},method:"POST",body:JSON.stringify(data)}).then(function(a){return a.ok?void console.log("Successfully Approved Kill"):submitError()}).catch(submitError)}function populateProfilePage(a){document.getElementById("kills");document.getElementById("firstName").innerHTML=a.firstName,document.getElementById("target").innerHTML=a.target}function joinGame(){var a={},b="";return form.gameCode.value?a.gameCode=form.gameCode.value:(error(form.gameCode),b+="Please Enter Game Code; "),form.firstName.value?a.firstName=form.firstName.value:(error(form.firstName),b+="Please Enter First Name; "),form.lastName.value?a.lastName=form.lastName.value:(error(form.lastName),b+="Please Enter Last Name; "),form.email.value&&validateEmail(form.email)?a.email=form.email.value:(error(form.email),b+="Please Enter Proper Email; "),form.password.value?a.password=form.password.value:(error(form.password),b+="Please Enter Password; "),b?displayError(b):void fetch("/join",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(function(a){return a.ok?a.json().then(function(a){localStorage.token=a.token,window.location="/player"+a.gameStatus+"?token="+a.token}):submitError(a)}).catch(submitError)}function loginPlayer(){var a={},b="";return form.gameCode.value?a.gameCode=form.gameCode.value:(error(form.gameCode),b+="Please Enter Game Code; "),form.email.value?a.email=form.email.value:(error(form.email),b+="Please Enter Email; "),form.password.value?a.password=form.password.value:(error(form.password),b+="Please Enter Password; "),b?displayError(b):void fetch("/login/player",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(function(a){return a.ok?a.json().then(function(a){localStorage.token=a.token,window.location="/player"+a.gameStatus+"?token="+a.token}):submitError(a)}).catch(submitError)}function loginAdmin(){var a={},b="";return form.gameCode.value?a.gameCode=form.gameCode.value:(error(form.gameCode),b+="Please Enter Game Code; "),form.password.value?a.password=form.password.value:(error(form.password),b+="Please Enter Password; "),b?displayError(b):void fetch("/login/admin",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(function(a){return a.ok?a.json().then(function(a){localStorage.token=a.token,window.location="/admin?token="+a.token}):submitError(a)}).catch(submitError)}function changeGameStatus(){var a=JSON.parse(atob(localStorage.token.split(".")[1]));fetch("/changeGameStatus",{headers:{"Content-type":"application/json","x-access-token":localStorage.token},method:"POST",body:a}).then(function(a){return a.ok?void console.log("Started Game"):submitError(a)}).catch(submitError)}function removeUser(a){var b=JSON.parse(atob(localStorage.token.split(".")[1])),c={gameCode:b.gameCode,user_id:a};fetch("/removePlayer",{headers:{"x-access-token":localStorage.token,"Content-type":"application/json"},method:"DELETE",body:JSON.stringify(c)}).then(function(a){return a.ok?void console.log("Deleted Player"):submitError(a)}).catch(submitError)}function endGame(){var a=JSON.parse(atob(localStorage.token.split(".")[1]));fetch("/changeGameStatus",{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify(a.gameCode)}).then(function(a){return a.ok?void console.log("Ended Game"):submitError(a)}).catch(submitError)}function validateEmail(a,b){var c=a.value;if(!c&&!b)return!0;var d=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c);return d||error(a),d}function error(a){a.style.border="3px solid #F00"}function clearError(a){return"message"===a?document.getElementById("js-error-message").style.visibility="hidden":void(a.style.border="1px solid #888")}function clearForm(){form.reset(),clearError("message");for(var a=document.getElementsByClassName("hidden"),b=0;b<a.length;b++)a[b].style.display=""}function submitSuccess(a){return a.ok?void console.log("Successfully Submitted Form"):submitError(a)}function submitError(a,b){return console.log(a.status),a.status>=400&&a.status<500?a.text().then(function(a){displayError(a)}):displayError(b?b:"There Was a Problem Somewhere in The Program")}function displayError(a){var b=document.getElementById("js-error-message");b.innerHTML=a,b.style.visibility="visible"}var form=document.forms[0];
=======

>>>>>>> fb752209290023c37a1d61ef7db8593f50f6c3c8
