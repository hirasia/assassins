
function submitOnEnterKey(a,b){b=b||form;for(var c=function(b){13===b.keyCode&&a()},d=b.childNodes,e=0;e<d.length;e++){var f=d[e];f.id&&"js-admin-info"===f.id&&submitOnEnterKey(a,f);var g=f.getAttribute("type");"text"!==g&&"email"!==g&&"password"!==g&&"number"!==g&&"phone"!==g||(f.onkeydown=c)}}function submitCreateForm(){var a={},b="";return form.gameName.value&&(a.gameName=form.gameName.value),form.gameCode.value?a.gameCode=form.gameCode.value:(error(form.gameCode),b+="Please Enter Game Code; "),form.email.value&&validateEmail(form.email)?a.email=form.email.value:(error(form.email),b+="Please Enter Proper Email; "),form.password.value?a.password=form.password.value:(error(form.password),b+="Please Enter Password; "),form.setRules.value&&(a.setRules=form.setRules.value),b?displayError(b):(console.log(a),void fetch("/create",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(function(a){return a.ok?a.json.then(function(a){localStorage.token=a.token;JSON.parse(atob(localStorage.token.split(".")[1]));window.location="/admin"}):submitError(a)}).catch(submitError))}function joinGame(){var a={},b="";return form.gameCode.value?a.gameCode=form.gameCode.value:(error(form.gameCode),b+="Please Enter Game Code; "),form.firstName.value?a.firstName=form.firstName.value:(error(form.firstName),b+="Please Enter First Name; "),form.lastName.value?a.lastName=form.lastName.value:(error(form.lastName),b+="Please Enter Last Name; "),form.email.value&&validateEmail(form.email)?a.email=form.email.value:(error(form.email),b+="Please Enter Proper Email; "),form.password.value?a.password=form.password.value:(error(form.password),b+="Please Enter Password; "),b?displayError(b):void fetch("/join",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then(function(a){return a.ok?void console.log("joined a game!"):submitError(a)}).catch(submitError)}function changeGameStatus(){var a=JSON.parse(atob(localStorage.token.split(".")[1]));fetch("/changeGameStatus",{headers:{"Content-type":"application/json","x-access-token":localStorage.token},method:"POST",body:a}).then(function(a){return a.ok?void console.log("Started Game"):submitError(a)}).catch(submitError)}function removeUser(a){var b=JSON.parse(atob(localStorage.token.split(".")[1])),c={gameCode:b.gameCode,user_id:b._id};fetch("/removePlayer",{headers:{"Content-type":"application/json"},method:"DELETE",body:JSON.stringify(c)}).then(function(a){return a.ok?void console.log("Deleted Player"):submitError(a)}).catch(submitError)}function endGame(){var a=JSON.parse(atob(localStorage.token.split(".")[1]));fetch("/changeGameStatus",{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify(a.gameCode)}).then(function(a){return a.ok?void console.log("Ended Game"):submitError(a)}).catch(submitError)}function validateEmail(a,b){var c=a.value;if(!c&&!b)return!0;var d=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c);return d||error(a),d}function error(a){a.style.border="3px solid #F00"}function clearError(a){return"message"===a?document.getElementById("js-error-message").style.visibility="hidden":void(a.style.border="1px solid #888")}function clearForm(){form.reset(),clearError("message");for(var a=document.getElementsByClassName("hidden"),b=0;b<a.length;b++)a[b].style.display=""}function submitSuccess(a){return a.ok?void console.log("Successfully Submitted Form"):submitError(a)}function submitError(a,b){return console.log(a.status),a.status>=400&&a.status<500?a.text().then(function(a){displayError(a)}):displayError(b?b:"There Was a Problem Somewhere in The Program")}function displayError(a){var b=document.getElementById("js-error-message");b.innerHTML=a,b.style.visibility="visible"}var form=document.forms[0];